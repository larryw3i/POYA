(function(n,t){typeof exports=="object"&&typeof module!="undefined"?module.exports=t():typeof define=="function"&&define.amd?define(t):n.wangEditor=t()})(this,function(){"use strict";function ci(n){var t=void 0;return t=document.createElement("div"),t.innerHTML=n,t.children}function ni(n){return n?n instanceof HTMLCollection||n instanceof NodeList?!0:!1:!1}function li(n){var t=document.querySelectorAll(n);return ni(t)?t:[t]}function h(n){var u,t,r,i;if(n){if(n instanceof h)return n;if(this.selector=n,u=n.nodeType,t=[],u===9?t=[n]:u===1?t=[n]:ni(n)||n instanceof Array?t=n:typeof n=="string"&&(n=n.replace("/\n/mg","").trim(),t=n.indexOf("<")===0?ci(n):li(n)),r=t.length,!r)return this;for(i=void 0,i=0;i<r;i++)this[i]=t[i];this.length=r}}function n(n){return new h(n)}function f(n,t){var i=void 0,r=void 0;for(i in n)if(n.hasOwnProperty(i)&&(r=t.call(n,i,n[i]),r===!1))break}function a(n,t){for(var i=void 0,r=void 0,u=void 0,f=n.length||0,i=0;i<f;i++)if(r=n[i],u=t.call(n,r,i),u===!1)break}function t(n){return n+Math.random().toString().slice(2)}function c(n){return n==null?"":n.replace(/</gm,"&lt;").replace(/>/gm,"&gt;").replace(/"/gm,"&quot;").replace(/(\r\n|\r|\n)/g,"<br/>")}function v(n){return typeof n=="function"}function y(t){this.editor=t;this.$elem=n('<div class="w-e-menu">\n            <i class="w-e-icon-bold"><\/i>\n        <\/div>');this.type="click";this._active=!1}function u(t,i){var u=this,o=t.editor;this.menu=t;this.opt=i;var f=n('<div class="w-e-droplist"><\/div>'),r=i.$title,e=void 0;r&&(e=r.html(),e=s(o,e),r.html(e),r.addClass("w-e-dp-title"),f.append(r));var c=i.list||[],l=i.type||"list",a=i.onClick||ri,h=n('<ul class="'+(l==="list"?"w-e-list":"w-e-block")+'"><\/ul>');f.append(h);c.forEach(function(t){var i=t.$elem,f=i.html(),e,r;if(f=s(o,f),i.html(f),e=t.value,r=n('<li class="w-e-item"><\/li>'),i){r.append(i);h.append(r);r.on("click",function(){a(e);u.hideTimeoutId=setTimeout(function(){u.hide()},0)})}});f.on("mouseleave",function(){u.hideTimeoutId=setTimeout(function(){u.hide()},0)});this.$container=f;this._rendered=!1;this._show=!1}function p(t){var i=this;this.editor=t;this.$elem=n('<div class="w-e-menu"><i class="w-e-icon-header"><\/i><\/div>');this.type="droplist";this._active=!1;this.droplist=new u(this,{width:100,$title:n("<p>ËÆæÁΩÆÊ†áÈ¢ò<\/p>"),type:"list",list:[{$elem:n("<h1>H1<\/h1>"),value:"<h1>"},{$elem:n("<h2>H2<\/h2>"),value:"<h2>"},{$elem:n("<h3>H3<\/h3>"),value:"<h3>"},{$elem:n("<h4>H4<\/h4>"),value:"<h4>"},{$elem:n("<h5>H5<\/h5>"),value:"<h5>"},{$elem:n("<p>Ê≠£Êñá<\/p>"),value:"<p>"}],onClick:function(n){i._command(n)}})}function w(t){var i=this;this.editor=t;this.$elem=n('<div class="w-e-menu"><i class="w-e-icon-text-heigh"><\/i><\/div>');this.type="droplist";this._active=!1;this.droplist=new u(this,{width:160,$title:n("<p>Â≠óÂè∑<\/p>"),type:"list",list:[{$elem:n('<span style="font-size: x-small;">x-small<\/span>'),value:"1"},{$elem:n('<span style="font-size: small;">small<\/span>'),value:"2"},{$elem:n("<span>normal<\/span>"),value:"3"},{$elem:n('<span style="font-size: large;">large<\/span>'),value:"4"},{$elem:n('<span style="font-size: x-large;">x-large<\/span>'),value:"5"},{$elem:n('<span style="font-size: xx-large;">xx-large<\/span>'),value:"6"}],onClick:function(n){i._command(n)}})}function b(t){var f=this,i,r;this.editor=t;this.$elem=n('<div class="w-e-menu"><i class="w-e-icon-font"><\/i><\/div>');this.type="droplist";this._active=!1;i=t.config;r=i.fontNames||[];this.droplist=new u(this,{width:100,$title:n("<p>Â≠ó‰Ωì<\/p>"),type:"list",list:r.map(function(t){return{$elem:n('<span style="font-family: '+t+';">'+t+"<\/span>"),value:t}}),onClick:function(n){f._command(n)}})}function r(n,t){this.menu=n;this.opt=t}function k(t){this.editor=t;this.$elem=n('<div class="w-e-menu"><i class="w-e-icon-link"><\/i><\/div>');this.type="panel";this._active=!1}function d(t){this.editor=t;this.$elem=n('<div class="w-e-menu">\n            <i class="w-e-icon-italic"><\/i>\n        <\/div>');this.type="click";this._active=!1}function g(t){this.editor=t;this.$elem=n('<div class="w-e-menu">\n            <i class="w-e-icon-redo"><\/i>\n        <\/div>');this.type="click";this._active=!1}function nt(t){this.editor=t;this.$elem=n('<div class="w-e-menu">\n            <i class="w-e-icon-strikethrough"><\/i>\n        <\/div>');this.type="click";this._active=!1}function tt(t){this.editor=t;this.$elem=n('<div class="w-e-menu">\n            <i class="w-e-icon-underline"><\/i>\n        <\/div>');this.type="click";this._active=!1}function it(t){this.editor=t;this.$elem=n('<div class="w-e-menu">\n            <i class="w-e-icon-undo"><\/i>\n        <\/div>');this.type="click";this._active=!1}function rt(t){var i=this;this.editor=t;this.$elem=n('<div class="w-e-menu"><i class="w-e-icon-list2"><\/i><\/div>');this.type="droplist";this._active=!1;this.droplist=new u(this,{width:120,$title:n("<p>ËÆæÁΩÆÂàóË°®<\/p>"),type:"list",list:[{$elem:n('<span><i class="w-e-icon-list-numbered"><\/i> ÊúâÂ∫èÂàóË°®<\/span>'),value:"insertOrderedList"},{$elem:n('<span><i class="w-e-icon-list2"><\/i> Êó†Â∫èÂàóË°®<\/span>'),value:"insertUnorderedList"}],onClick:function(n){i._command(n)}})}function ut(t){var i=this;this.editor=t;this.$elem=n('<div class="w-e-menu"><i class="w-e-icon-paragraph-left"><\/i><\/div>');this.type="droplist";this._active=!1;this.droplist=new u(this,{width:100,$title:n("<p>ÂØπÈΩêÊñπÂºè<\/p>"),type:"list",list:[{$elem:n('<span><i class="w-e-icon-paragraph-left"><\/i> Èù†Â∑¶<\/span>'),value:"justifyLeft"},{$elem:n('<span><i class="w-e-icon-paragraph-center"><\/i> Â±Ö‰∏≠<\/span>'),value:"justifyCenter"},{$elem:n('<span><i class="w-e-icon-paragraph-right"><\/i> Èù†Âè≥<\/span>'),value:"justifyRight"}],onClick:function(n){i._command(n)}})}function ft(t){var f=this,i,r;this.editor=t;this.$elem=n('<div class="w-e-menu"><i class="w-e-icon-pencil2"><\/i><\/div>');this.type="droplist";i=t.config;r=i.colors||[];this._active=!1;this.droplist=new u(this,{width:120,$title:n("<p>ÊñáÂ≠óÈ¢úËâ≤<\/p>"),type:"inline-block",list:r.map(function(t){return{$elem:n('<i style="color:'+t+';" class="w-e-icon-pencil2"><\/i>'),value:t}}),onClick:function(n){f._command(n)}})}function et(t){var f=this,i,r;this.editor=t;this.$elem=n('<div class="w-e-menu"><i class="w-e-icon-paint-brush"><\/i><\/div>');this.type="droplist";i=t.config;r=i.colors||[];this._active=!1;this.droplist=new u(this,{width:120,$title:n("<p>ËÉåÊôØËâ≤<\/p>"),type:"inline-block",list:r.map(function(t){return{$elem:n('<i style="color:'+t+';" class="w-e-icon-paint-brush"><\/i>'),value:t}}),onClick:function(n){f._command(n)}})}function ot(t){this.editor=t;this.$elem=n('<div class="w-e-menu">\n            <i class="w-e-icon-quotes-left"><\/i>\n        <\/div>');this.type="click";this._active=!1}function st(t){this.editor=t;this.$elem=n('<div class="w-e-menu">\n            <i class="w-e-icon-terminal"><\/i>\n        <\/div>');this.type="panel";this._active=!1}function ht(t){this.editor=t;this.$elem=n('<div class="w-e-menu">\n            <i class="w-e-icon-happy"><\/i>\n        <\/div>');this.type="panel";this._active=!1}function ct(t){this.editor=t;this.$elem=n('<div class="w-e-menu"><i class="w-e-icon-table2"><\/i><\/div>');this.type="panel";this._active=!1}function lt(t){this.editor=t;this.$elem=n('<div class="w-e-menu"><i class="w-e-icon-play"><\/i><\/div>');this.type="panel";this._active=!1}function at(i){this.editor=i;var r=t("w-e-img");this.$elem=n('<div class="w-e-menu" id="'+r+'"><i class="w-e-icon-image"><\/i><\/div>');i.imgMenuId=r;this.type="panel";this._active=!1}function vt(n){this.editor=n;this.menus={}}function fi(n){var t=n.clipboardData||n.originalEvent&&n.originalEvent.clipboardData,i=void 0;return i=t==null?window.clipboardData&&window.clipboardData.getData("text"):t.getData("text/plain"),c(i)}function ai(n,t,i){var f=n.clipboardData||n.originalEvent&&n.originalEvent.clipboardData,u=void 0,r=void 0,e;if(f==null?u=window.clipboardData&&window.clipboardData.getData("text"):(u=f.getData("text/plain"),r=f.getData("text/html")),!r&&u&&(r="<p>"+c(u)+"<\/p>"),r)return e=r.split("<\/html>"),e.length===2&&(r=e[0]),r=r.replace(/<(meta|script|link).+?>/igm,""),r=r.replace(/<!--.*?-->/mg,""),r=r.replace(/\s?data-.+?=('|").+?('|")/igm,""),i&&(r=r.replace(/<img.+?>/igm,"")),t?r.replace(/\s?(class|style)=('|").*?('|")/igm,""):r.replace(/\s?class=('|").*?('|")/igm,"")}function vi(n){var t=[],u=fi(n),r,i;return u?t:(r=n.clipboardData||n.originalEvent&&n.originalEvent.clipboardData||{},i=r.items,!i)?t:(f(i,function(n,i){var r=i.type;/image/i.test(r)&&t.push(i.getAsFile())}),t)}function ei(t){var i=[],r=t.childNodes()||[];return r.forEach(function(t){var r=void 0,e=t.nodeType,u,f;if(e===3&&(r=t.textContent,r=c(r)),e===1){r={};r.tag=t.nodeName.toLowerCase();var o=[],s=t.attributes||{},h=s.length||0;for(u=0;u<h;u++)f=s[u],o.push({name:f.name,value:f.value});r.attrs=o;r.children=ei(n(t))}i.push(r)}),i}function yt(n){this.editor=n}function pt(n){this.editor=n}function wt(n){this.editor=n;this._currentRange=null}function bt(t){this.editor=t;this._time=0;this._isShow=!1;this._isRender=!1;this._timeoutId=0;this.$textContainer=t.$textContainerElem;this.$bar=n('<div class="w-e-progress"><\/div>')}function dt(n){this.editor=n}function gt(n,t){if(n==null)throw new Error("ÈîôËØØÔºöÂàùÂßãÂåñÁºñËæëÂô®Êó∂ÂÄôÊú™‰º†ÂÖ•‰ªª‰ΩïÂèÇÊï∞ÔºåËØ∑Êü•ÈòÖÊñáÊ°£");this.id="wangEditor-"+oi++;this.toolbarSelector=n;this.textSelector=t;this.customConfig={}}var hi=function(){typeof Object.assign!="function"&&(Object.assign=function(n){var u,i,t,r;if(n==null)throw new TypeError("Cannot convert undefined or null to object");for(u=Object(n),i=1;i<arguments.length;i++)if(t=arguments[i],t!=null)for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&(u[r]=t[r]);return u});Element.prototype.matches||(Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector||function(n){for(var i=(this.document||this.ownerDocument).querySelectorAll(n),t=i.length;--t>=0&&i.item(t)!==this;);return t>-1})},ti=[],ii,o,s,ri,ui,e,i,kt,oi,si,l;h.prototype={constructor:h,forEach:function(n){for(var t=void 0,i,r,t=0;t<this.length;t++)if(i=this[t],r=n.call(i,i,t),r===!1)break;return this},clone:function(t){var i=[];return this.forEach(function(n){i.push(n.cloneNode(!!t))}),n(i)},get:function(t){var i=this.length;return t>=i&&(t=t%i),n(this[t])},first:function(){return this.get(0)},last:function(){var n=this.length;return this.get(n-1)},on:function(n,t,i){i||(i=t,t=null);var r=[];return r=n.split(/\s+/),this.forEach(function(n){r.forEach(function(r){if(r){if(ti.push({elem:n,type:r,fn:i}),!t){n.addEventListener(r,i);return}n.addEventListener(r,function(n){var r=n.target;r.matches(t)&&i.call(r,n)})}})})},off:function(n,t){return this.forEach(function(i){i.removeEventListener(n,t)})},attr:function(n,t){return t==null?this[0].getAttribute(n):this.forEach(function(i){i.setAttribute(n,t)})},addClass:function(n){return n?this.forEach(function(t){var i=void 0;t.className?(i=t.className.split(/\s/),i=i.filter(function(n){return!!n.trim()}),i.indexOf(n)<0&&i.push(n),t.className=i.join(" ")):t.className=n}):this},removeClass:function(n){return n?this.forEach(function(t){var i=void 0;t.className&&(i=t.className.split(/\s/),i=i.filter(function(t){return(t=t.trim(),!t||t===n)?!1:!0}),t.className=i.join(" "))}):this},css:function(n,t){var i=n+":"+t+";";return this.forEach(function(t){var u=(t.getAttribute("style")||"").trim(),f=void 0,r=[];u?(f=u.split(";"),f.forEach(function(n){var t=n.split(":").map(function(n){return n.trim()});t.length===2&&r.push(t[0]+":"+t[1])}),r=r.map(function(t){return t.indexOf(n)===0?i:t}),r.indexOf(i)<0&&r.push(i),t.setAttribute("style",r.join("; "))):t.setAttribute("style",i)})},show:function(){return this.css("display","block")},hide:function(){return this.css("display","none")},children:function(){var t=this[0];return t?n(t.children):null},childNodes:function(){var t=this[0];return t?n(t.childNodes):null},append:function(n){return this.forEach(function(t){n.forEach(function(n){t.appendChild(n)})})},remove:function(){return this.forEach(function(n){if(n.remove)n.remove();else{var t=n.parentElement;t&&t.removeChild(n)}})},isContain:function(n){var t=this[0],i=n[0];return t.contains(i)},getSizeData:function(){var n=this[0];return n.getBoundingClientRect()},getNodeName:function(){var n=this[0];return n.nodeName},find:function(t){var i=this[0];return n(i.querySelectorAll(t))},text:function(n){if(n)return this.forEach(function(t){t.innerHTML=n});var t=this[0];return t.innerHTML.replace(/<.*?>/g,function(){return""})},html:function(n){var t=this[0];return n==null?t.innerHTML:(t.innerHTML=n,this)},val:function(){var n=this[0];return n.value.trim()},focus:function(){return this.forEach(function(n){n.focus()})},parent:function(){var t=this[0];return n(t.parentElement)},parentUntil:function(t,i){var e=document.querySelectorAll(t),o=e.length,f,u,r;if(!o||(f=i||this[0],f.nodeName==="BODY"))return null;for(u=f.parentElement,r=void 0,r=0;r<o;r++)if(u===e[r])return n(u);return this.parentUntil(t,u)},equal:function(n){return n.nodeType===1?this[0]===n:this[0]===n[0]},insertBefore:function(t){var r=n(t),i=r[0];return i?this.forEach(function(n){var t=i.parentNode;t.insertBefore(n,i)}):this},insertAfter:function(t){var r=n(t),i=r[0];return i?this.forEach(function(n){var t=i.parentNode;t.lastChild===i?t.appendChild(n):t.insertBefore(n,i.nextSibling)}):this}};n.offAll=function(){ti.forEach(function(n){var t=n.elem,i=n.type,r=n.fn;t.removeEventListener(i,r)})};ii={menus:["head","bold","fontSize","fontName","italic","underline","strikeThrough","foreColor","backColor","link","list","justify","quote","emoticon","image","table","video","code","undo","redo"],fontNames:["ÂÆã‰Ωì","ÂæÆËΩØÈõÖÈªë","Arial","Tahoma","Verdana"],colors:["#000000","#eeece0","#1c487f","#4d80bf","#c24f4a","#8baa4a","#7b5ba1","#46acc8","#f9963b","#ffffff"],emotions:[{title:"ÈªòËÆ§",type:"image",content:[{alt:"[ÂùèÁ¨ë]",src:"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/50/pcmoren_huaixiao_org.png"},{alt:"[ËàîÂ±è]",src:"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/40/pcmoren_tian_org.png"},{alt:"[Ê±°]",src:"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/3c/pcmoren_wu_org.png"}]},{title:"Êñ∞Êµ™",type:"image",content:[{src:"http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/7a/shenshou_thumb.gif",alt:"[ËçâÊ≥•È©¨]"},{src:"http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/60/horse2_thumb.gif",alt:"[Á•ûÈ©¨]"},{src:"http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/bc/fuyun_thumb.gif",alt:"[ÊµÆ‰∫ë]"}]},{title:"emoji",type:"emoji",content:"üòÄ üòÉ üòÑ üòÅ üòÜ üòÖ üòÇ üòä üòá üôÇ üôÉ üòâ üòì üò™ üò¥ üôÑ ü§î üò¨ ü§ê".split(/\s/)}],zIndex:1e4,debug:!1,linkCheck:function(){return!0},linkImgCheck:function(){return!0},pasteFilterStyle:!0,pasteIgnoreImg:!1,pasteTextHandle:function(n){return n},showLinkImg:!0,linkImgCallback:function(){},uploadImgMaxSize:5242880,uploadImgShowBase64:!1,uploadFileName:"",uploadImgParams:{},uploadImgHeaders:{},withCredentials:!1,uploadImgTimeout:1e4,uploadImgHooks:{before:function(){},success:function(){},fail:function(){},error:function(){},timeout:function(){}},qiniu:!1};o={_ua:navigator.userAgent,isWebkit:function(){return/webkit/i.test(this._ua)},isIE:function(){return"ActiveXObject"in window}};y.prototype={constructor:y,onClick:function(){var n=this.editor,t=n.selection.isSelectionEmpty();t&&n.selection.createEmptyRange();n.cmd.do("bold");t&&(n.selection.collapseRange(),n.selection.restoreSelection())},tryChangeActive:function(){var t=this.editor,n=this.$elem;t.cmd.queryCommandState("bold")?(this._active=!0,n.addClass("w-e-active")):(this._active=!1,n.removeClass("w-e-active"))}};s=function(n,t){var r=n.config.langArgs||[],i=t;return r.forEach(function(n){var t=n.reg,r=n.val;t.test(i)&&(i=i.replace(t,function(){return r}))}),i};ri=function(){};u.prototype={constructor:u,show:function(){var i,r;this.hideTimeoutId&&clearTimeout(this.hideTimeoutId);var u=this.menu,t=u.$elem,n=this.$container;this._show||(this._rendered?n.show():(i=t.getSizeData().height||0,r=this.opt.width||100,n.css("margin-top",i+"px").css("width",r+"px"),t.append(n),this._rendered=!0),this._show=!0)},hide:function(){this.showTimeoutId&&clearTimeout(this.showTimeoutId);var n=this.$container;this._show&&(n.hide(),this._show=!1)}};p.prototype={constructor:p,_command:function(n){var t=this.editor,i=t.selection.getSelectionContainerElem();t.$textElem.equal(i)||t.cmd.do("formatBlock",n)},tryChangeActive:function(){var t=this.editor,n=this.$elem,i=t.cmd.queryCommandValue("formatBlock");/^h/i.test(i)?(this._active=!0,n.addClass("w-e-active")):(this._active=!1,n.removeClass("w-e-active"))}};w.prototype={constructor:w,_command:function(n){var t=this.editor;t.cmd.do("fontSize",n)}};b.prototype={constructor:b,_command:function(n){var t=this.editor;t.cmd.do("fontName",n)}};ui=function(){};e=[];r.prototype={constructor:r,show:function(){var r=this,u=this.menu,h,c,i,l,v;if(!(e.indexOf(u)>=0)){var f=u.editor,b=n("body"),k=f.$textContainerElem,o=this.opt,t=n('<div class="w-e-panel-container"><\/div>'),y=o.width||300;t.css("width",y+"px").css("margin-left",(0-y)/2+"px");h=n('<i class="w-e-icon-close w-e-panel-close"><\/i>');t.append(h);h.on("click",function(){r.hide()});c=n('<ul class="w-e-panel-tab-title"><\/ul>');i=n('<div class="w-e-panel-tab-content"><\/div>');t.append(c).append(i);l=o.height;l&&i.css("height",l+"px").css("overflow-y","auto");var p=o.tabs||[],w=[],a=[];p.forEach(function(t,r){var o,h,u,e;if(t){o=t.title||"";h=t.tpl||"";o=s(f,o);h=s(f,h);u=n('<li class="w-e-item">'+o+"<\/li>");c.append(u);e=n(h);i.append(e);u._index=r;w.push(u);a.push(e);r===0?(u._active=!0,u.addClass("w-e-active")):e.hide();u.on("click",function(){u._active||(w.forEach(function(n){n._active=!1;n.removeClass("w-e-active")}),a.forEach(function(n){n.hide()}),u._active=!0,u.addClass("w-e-active"),e.show())})}});t.on("click",function(n){n.stopPropagation()});b.on("click",function(){r.hide()});k.append(t);p.forEach(function(n,t){if(n){var i=n.events||[];i.forEach(function(n){var i=n.selector,u=n.type,f=n.fn||ui,e=a[t];e.find(i).on(u,function(n){n.stopPropagation();var t=f(n);t&&r.hide()})})}});v=t.find("input[type=text],textarea");v.length&&v.get(0).focus();this.$container=t;this._hideOtherPanels();e.push(u)}},hide:function(){var t=this.menu,n=this.$container;n&&n.remove();e=e.filter(function(n){return n===t?!1:!0})},_hideOtherPanels:function(){e.length&&e.forEach(function(n){var t=n.panel||{};t.hide&&t.hide()})}};k.prototype={constructor:k,onClick:function(){var n=this.editor,t=void 0;if(this._active){if(t=n.selection.getSelectionContainerElem(),!t)return;n.selection.createRangeByElem(t);n.selection.restoreSelection();this._createPanel(t.text(),t.attr("href"))}else n.selection.isSelectionEmpty()?this._createPanel("",""):this._createPanel(n.selection.getSelectionText(),"")},_createPanel:function(i,u){var f=this,e=t("input-link"),o=t("input-text"),s=t("btn-ok"),h=t("btn-del"),l=this._active?"inline-block":"none",c=new r(this,{width:300,tabs:[{title:"ÈìæÊé•",tpl:'<div>\n                            <input id="'+o+'" type="text" class="block" value="'+i+'" placeholder="ÈìæÊé•ÊñáÂ≠ó"/><\/td>\n                            <input id="'+e+'" type="text" class="block" value="'+u+'" placeholder="http://..."/><\/td>\n                            <div class="w-e-button-container">\n                                <button id="'+s+'" class="right">ÊèíÂÖ•<\/button>\n                                <button id="'+h+'" class="gray right" style="display:'+l+'">Âà†Èô§ÈìæÊé•<\/button>\n                            <\/div>\n                        <\/div>',events:[{selector:"#"+s,type:"click",fn:function(){var t=n("#"+e),i=n("#"+o),r=t.val(),u=i.val();return f._insertLink(u,r),!0}},{selector:"#"+h,type:"click",fn:function(){return f._delLink(),!0}}]}]});c.show();this.panel=c},_delLink:function(){var n,t,i;this._active&&(n=this.editor,t=n.selection.getSelectionContainerElem(),t)&&(i=n.selection.getSelectionText(),n.cmd.do("insertHTML","<span>"+i+"<\/span>"))},_insertLink:function(n,t){var u=this.editor,f=u.config,i=f.linkCheck,r=!0;i&&typeof i=="function"&&(r=i(n,t));r===!0?u.cmd.do("insertHTML",'<a href="'+t+'" target="_blank">'+n+"<\/a>"):alert(r)},tryChangeActive:function(){var i=this.editor,n=this.$elem,t=i.selection.getSelectionContainerElem();t&&(t.getNodeName()==="A"?(this._active=!0,n.addClass("w-e-active")):(this._active=!1,n.removeClass("w-e-active")))}};d.prototype={constructor:d,onClick:function(){var n=this.editor,t=n.selection.isSelectionEmpty();t&&n.selection.createEmptyRange();n.cmd.do("italic");t&&(n.selection.collapseRange(),n.selection.restoreSelection())},tryChangeActive:function(){var t=this.editor,n=this.$elem;t.cmd.queryCommandState("italic")?(this._active=!0,n.addClass("w-e-active")):(this._active=!1,n.removeClass("w-e-active"))}};g.prototype={constructor:g,onClick:function(){var n=this.editor;n.cmd.do("redo")}};nt.prototype={constructor:nt,onClick:function(){var n=this.editor,t=n.selection.isSelectionEmpty();t&&n.selection.createEmptyRange();n.cmd.do("strikeThrough");t&&(n.selection.collapseRange(),n.selection.restoreSelection())},tryChangeActive:function(){var t=this.editor,n=this.$elem;t.cmd.queryCommandState("strikeThrough")?(this._active=!0,n.addClass("w-e-active")):(this._active=!1,n.removeClass("w-e-active"))}};tt.prototype={constructor:tt,onClick:function(){var n=this.editor,t=n.selection.isSelectionEmpty();t&&n.selection.createEmptyRange();n.cmd.do("underline");t&&(n.selection.collapseRange(),n.selection.restoreSelection())},tryChangeActive:function(){var t=this.editor,n=this.$elem;t.cmd.queryCommandState("underline")?(this._active=!0,n.addClass("w-e-active")):(this._active=!1,n.removeClass("w-e-active"))}};it.prototype={constructor:it,onClick:function(){var n=this.editor;n.cmd.do("undo")}};rt.prototype={constructor:rt,_command:function(n){var i=this.editor,u=i.$textElem,t,r;(i.selection.restoreSelection(),i.cmd.queryCommandState(n))||(i.cmd.do(n),t=i.selection.getSelectionContainerElem(),t.getNodeName()==="LI"&&(t=t.parent()),/^ol|ul$/i.test(t.getNodeName())!==!1)&&(t.equal(u)||(r=t.parent(),r.equal(u))||(t.insertAfter(r),r.remove()))},tryChangeActive:function(){var n=this.editor,t=this.$elem;n.cmd.queryCommandState("insertUnOrderedList")||n.cmd.queryCommandState("insertOrderedList")?(this._active=!0,t.addClass("w-e-active")):(this._active=!1,t.removeClass("w-e-active"))}};ut.prototype={constructor:ut,_command:function(n){var t=this.editor;t.cmd.do(n)}};ft.prototype={constructor:ft,_command:function(n){var t=this.editor;t.cmd.do("foreColor",n)}};et.prototype={constructor:et,_command:function(n){var t=this.editor;t.cmd.do("backColor",n)}};ot.prototype={constructor:ot,onClick:function(){var u=this.editor,t=u.selection.getSelectionContainerElem(),f=t.getNodeName(),i,r;if(!o.isIE()){f==="BLOCKQUOTE"?u.cmd.do("formatBlock","<P>"):u.cmd.do("formatBlock","<BLOCKQUOTE>");return}if(i=void 0,r=void 0,f==="P"){i=t.text();r=n("<blockquote>"+i+"<\/blockquote>");r.insertAfter(t);t.remove();return}f==="BLOCKQUOTE"&&(i=t.text(),r=n("<p>"+i+"<\/p>"),r.insertAfter(t),t.remove())},tryChangeActive:function(){var t=this.editor,n=this.$elem,i=t.cmd.queryCommandValue("formatBlock");/^BLOCKQUOTE$/i.test(i)?(this._active=!0,n.addClass("w-e-active")):(this._active=!1,n.removeClass("w-e-active"))}};st.prototype={constructor:st,onClick:function(){var t=this.editor,r=t.selection.getSelectionStartElem(),u=t.selection.getSelectionEndElem(),f=t.selection.isSelectionEmpty(),e=t.selection.getSelectionText(),i=void 0;if(!r.equal(u)){t.selection.restoreSelection();return}if(!f){i=n("<code>"+e+"<\/code>");t.cmd.do("insertElem",i);t.selection.createRangeByElem(i,!1);t.selection.restoreSelection();return}this._active?this._createPanel(r.html()):this._createPanel()},_createPanel:function(i){var u=this;i=i||"";var s=i?"edit":"new",f=t("texxt"),e=t("btn"),o=new r(this,{width:500,tabs:[{title:"ÊèíÂÖ•‰ª£Á†Å",tpl:'<div>\n                        <textarea id="'+f+'" style="height:145px;;">'+i+'<\/textarea>\n                        <div class="w-e-button-container">\n                            <button id="'+e+'" class="right">ÊèíÂÖ•<\/button>\n                        <\/div>\n                    <div>',events:[{selector:"#"+e,type:"click",fn:function(){var i=n("#"+f),t=i.val()||i.html();return t=c(t),s==="new"?u._insertCode(t):u._updateCode(t),!0}}]}]});o.show();this.panel=o},_insertCode:function(n){var t=this.editor;t.cmd.do("insertHTML","<pre><code>"+n+"<\/code><\/pre><p><br><\/p>")},_updateCode:function(n){var t=this.editor,i=t.selection.getSelectionContainerElem();i&&(i.html(n),t.selection.restoreSelection())},tryChangeActive:function(){var r=this.editor,t=this.$elem,n=r.selection.getSelectionContainerElem(),i;n&&(i=n.parent(),n.getNodeName()==="CODE"&&i.getNodeName()==="PRE"?(this._active=!0,t.addClass("w-e-active")):(this._active=!1,t.removeClass("w-e-active")))}};ht.prototype={constructor:ht,onClick:function(){this._createPanel()},_createPanel:function(){var u=this,f=this.editor,e=f.config,o=e.emotions||[],i=[],t;o.forEach(function(t){var f=t.type,e=t.content||[],r="";f==="emoji"&&e.forEach(function(n){n&&(r+='<span class="w-e-item">'+n+"<\/span>")});f==="image"&&e.forEach(function(n){var t=n.src,i=n.alt;t&&(r+='<span class="w-e-item"><img src="'+t+'" alt="'+i+'" data-w-e="1"/><\/span>')});i.push({title:t.title,tpl:'<div class="w-e-emoticon-container">'+r+"<\/div>",events:[{selector:"span.w-e-item",type:"click",fn:function(t){var f=t.target,i=n(f),e=i.getNodeName(),r=void 0;return r=e==="IMG"?i.parent().html():"<span>"+i.html()+"<\/span>",u._insert(r),!0}}]})});t=new r(this,{width:300,height:200,tabs:i});t.show();this.panel=t},_insert:function(n){var t=this.editor;t.cmd.do("insertHTML",n)}};ct.prototype={constructor:ct,onClick:function(){this._active?this._createEditPanel():this._createInsertPanel()},_createInsertPanel:function(){var o=this,i=t("btn"),u=t("row"),f=t("col"),e=new r(this,{width:250,tabs:[{title:"ÊèíÂÖ•Ë°®Ê†º",tpl:'<div>\n                        <p style="text-align:left; padding:5px 0;">\n                            ÂàõÂª∫\n                            <input id="'+u+'" type="text" value="5" style="width:40px;text-align:center;"/>\n                            Ë°å\n                            <input id="'+f+'" type="text" value="5" style="width:40px;text-align:center;"/>\n                            ÂàóÁöÑË°®Ê†º\n                        <\/p>\n                        <div class="w-e-button-container">\n                            <button id="'+i+'" class="right">ÊèíÂÖ•<\/button>\n                        <\/div>\n                    <\/div>',events:[{selector:"#"+i,type:"click",fn:function(){var t=parseInt(n("#"+u).val()),i=parseInt(n("#"+f).val());return t&&i&&t>0&&i>0&&o._insert(t,i),!0}}]}]});e.show();this.panel=e},_insert:function(n,t){for(var u=void 0,i=void 0,r='<table border="0" width="100%" cellpadding="0" cellspacing="0">',f,u=0;u<n;u++){if(r+="<tr>",u===0)for(i=0;i<t;i++)r+="<th>&nbsp;<\/th>";else for(i=0;i<t;i++)r+="<td>&nbsp;<\/td>";r+="<\/tr>"}r+="<\/table><p><br><\/p>";f=this.editor;f.cmd.do("insertHTML",r);f.cmd.do("enableObjectResizing",!1);f.cmd.do("enableInlineTableEditing",!1)},_createEditPanel:function(){var n=this,i=t("add-row"),u=t("add-col"),f=t("del-row"),e=t("del-col"),o=t("del-table"),s=new r(this,{width:320,tabs:[{title:"ÁºñËæëË°®Ê†º",tpl:'<div>\n                        <div class="w-e-button-container" style="border-bottom:1px solid #f1f1f1;padding-bottom:5px;margin-bottom:5px;">\n                            <button id="'+i+'" class="left">Â¢ûÂä†Ë°å<\/button>\n                            <button id="'+f+'" class="red left">Âà†Èô§Ë°å<\/button>\n                            <button id="'+u+'" class="left">Â¢ûÂä†Âàó<\/button>\n                            <button id="'+e+'" class="red left">Âà†Èô§Âàó<\/button>\n                        <\/div>\n                        <div class="w-e-button-container">\n                            <button id="'+o+'" class="gray left">Âà†Èô§Ë°®Ê†º<\/button>\n                        <\/dv>\n                    <\/div>',events:[{selector:"#"+i,type:"click",fn:function(){return n._addRow(),!0}},{selector:"#"+u,type:"click",fn:function(){return n._addCol(),!0}},{selector:"#"+f,type:"click",fn:function(){return n._delRow(),!0}},{selector:"#"+e,type:"click",fn:function(){return n._delCol(),!0}},{selector:"#"+o,type:"click",fn:function(){return n._delTable(),!0}}]}]});s.show()},_getLocationData:function(){var t={},e=this.editor,n=e.selection.getSelectionContainerElem(),i;if(n&&(i=n.getNodeName(),i==="TD"||i==="TH")){var r=n.parent(),u=r.children(),o=u.length;u.forEach(function(i,r){if(i===n[0])return t.td={index:r,elem:i,length:o},!1});var s=r.parent(),f=s.children(),h=f.length;return f.forEach(function(n,i){if(n===r[0])return t.tr={index:i,elem:n,length:h},!1}),t}},_addRow:function(){var t=this._getLocationData();if(t){for(var f=t.tr,e=n(f.elem),o=t.td,s=o.length,r=document.createElement("tr"),u="",i=void 0,i=0;i<s;i++)u+="<td>&nbsp;<\/td>";r.innerHTML=u;n(r).insertAfter(e)}},_addCol:function(){var t=this._getLocationData();if(t){var i=t.tr,r=t.td,u=r.index,f=n(i.elem),e=f.parent(),o=e.children();o.forEach(function(t){var r=n(t),f=r.children(),i=f.get(u),e=i.getNodeName().toLowerCase(),o=document.createElement(e);n(o).insertAfter(i)})}},_delRow:function(){var t=this._getLocationData(),i,r;t&&(i=t.tr,r=n(i.elem),r.remove())},_delCol:function(){var t=this._getLocationData();if(t){var i=t.tr,r=t.td,u=r.index,f=n(i.elem),e=f.parent(),o=e.children();o.forEach(function(t){var i=n(t),r=i.children(),f=r.get(u);f.remove()})}},_delTable:function(){var i=this.editor,t=i.selection.getSelectionContainerElem(),n;t&&(n=t.parentUntil("table"),n)&&n.remove()},tryChangeActive:function(){var r=this.editor,t=this.$elem,i=r.selection.getSelectionContainerElem(),n;i&&(n=i.getNodeName(),n==="TD"||n==="TH"?(this._active=!0,t.addClass("w-e-active")):(this._active=!1,t.removeClass("w-e-active")))}};lt.prototype={constructor:lt,onClick:function(){this._createPanel()},_createPanel:function(){var e=this,i=t("text-val"),u=t("btn"),f=new r(this,{width:350,tabs:[{title:"ÊèíÂÖ•ËßÜÈ¢ë",tpl:'<div>\n                        <input id="'+i+'" type="text" class="block" placeholder="Ê†ºÂºèÂ¶ÇÔºö<iframe src=... ><\/iframe>"/>\n                        <div class="w-e-button-container">\n                            <button id="'+u+'" class="right">ÊèíÂÖ•<\/button>\n                        <\/div>\n                    <\/div>',events:[{selector:"#"+u,type:"click",fn:function(){var r=n("#"+i),t=r.val().trim();return t&&e._insert(t),!0}}]}]});f.show();this.panel=f},_insert:function(n){var t=this.editor;t.cmd.do("insertHTML",n+"<p><br><\/p>")}};at.prototype={constructor:at,onClick:function(){var n=this.editor,t=n.config;t.qiniu||(this._active?this._createEditPanel():this._createInsertPanel())},_createEditPanel:function(){var n=this.editor,i=t("width-30"),u=t("width-50"),f=t("width-100"),e=t("del-btn"),s=[{title:"ÁºñËæëÂõæÁâá",tpl:'<div>\n                    <div class="w-e-button-container" style="border-bottom:1px solid #f1f1f1;padding-bottom:5px;margin-bottom:5px;">\n                        <span style="float:left;font-size:14px;margin:4px 5px 0 5px;color:#333;">ÊúÄÂ§ßÂÆΩÂ∫¶Ôºö<\/span>\n                        <button id="'+i+'" class="left">30%<\/button>\n                        <button id="'+u+'" class="left">50%<\/button>\n                        <button id="'+f+'" class="left">100%<\/button>\n                    <\/div>\n                    <div class="w-e-button-container">\n                        <button id="'+e+'" class="gray left">Âà†Èô§ÂõæÁâá<\/button>\n                    <\/dv>\n                <\/div>',events:[{selector:"#"+i,type:"click",fn:function(){var t=n._selectedImg;return t&&t.css("max-width","30%"),!0}},{selector:"#"+u,type:"click",fn:function(){var t=n._selectedImg;return t&&t.css("max-width","50%"),!0}},{selector:"#"+f,type:"click",fn:function(){var t=n._selectedImg;return t&&t.css("max-width","100%"),!0}},{selector:"#"+e,type:"click",fn:function(){var t=n._selectedImg;return t&&t.remove(),!0}}]}],o=new r(this,{width:300,tabs:s});o.show();this.panel=o},_createInsertPanel:function(){var o=this.editor,s=o.uploadImg,i=o.config,h=t("up-trigger"),u=t("up-file"),c=t("link-url"),l=t("link-btn"),a=[{title:"‰∏ä‰º†ÂõæÁâá",tpl:'<div class="w-e-up-img-container">\n                    <div id="'+h+'" class="w-e-up-btn">\n                        <i class="w-e-icon-upload2"><\/i>\n                    <\/div>\n                    <div style="display:none;">\n                        <input id="'+u+'" type="file" multiple="multiple" accept="image/jpg,image/jpeg,image/png,image/gif,image/bmp"/>\n                    <\/div>\n                <\/div>',events:[{selector:"#"+h,type:"click",fn:function(){var i=n("#"+u),t=i[0];if(t)t.click();else return!0}},{selector:"#"+u,type:"change",fn:function(){var r=n("#"+u),i=r[0],t;return i?(t=i.files,t.length&&s.uploadImg(t),!0):!0}}]},{title:"ÁΩëÁªúÂõæÁâá",tpl:'<div>\n                    <input id="'+c+'" type="text" class="block" placeholder="ÂõæÁâáÈìæÊé•"/><\/td>\n                    <div class="w-e-button-container">\n                        <button id="'+l+'" class="right">ÊèíÂÖ•<\/button>\n                    <\/div>\n                <\/div>',events:[{selector:"#"+l,type:"click",fn:function(){var i=n("#"+c),t=i.val().trim();return t&&s.insertLinkImg(t),!0}}]}],f=[],e;(i.uploadImgShowBase64||i.uploadImgServer||i.customUploadImg)&&window.FileReader&&f.push(a[0]);i.showLinkImg&&f.push(a[1]);e=new r(this,{width:300,tabs:f});e.show();this.panel=e},tryChangeActive:function(){var t=this.editor,n=this.$elem;t._selectedImg?(this._active=!0,n.addClass("w-e-active")):(this._active=!1,n.removeClass("w-e-active"))}};i={};i.bold=y;i.head=p;i.fontSize=w;i.fontName=b;i.link=k;i.italic=d;i.redo=g;i.strikeThrough=nt;i.underline=tt;i.undo=it;i.list=rt;i.justify=ut;i.foreColor=ft;i.backColor=et;i.quote=ot;i.code=st;i.emoticon=ht;i.table=ct;i.video=lt;i.image=at;vt.prototype={constructor:vt,init:function(){var t=this,n=this.editor,r=n.config||{},u=r.menus||[];u.forEach(function(r){var u=i[r];u&&typeof u=="function"&&(t.menus[r]=new u(n))});this._addToToolbar();this._bindEvent()},_addToToolbar:function(){var n=this.editor,t=n.$toolbarElem,i=this.menus,r=n.config,u=r.zIndex+1;f(i,function(n,i){var r=i.$elem;r&&(r.css("z-index",u),t.append(r))})},_bindEvent:function(){var t=this.menus,n=this.editor;f(t,function(t,i){var u=i.type;if(u){var f=i.$elem,r=i.droplist,e=i.panel;if(u==="click"&&i.onClick)f.on("click",function(t){if(n.selection.getRange()!=null)i.onClick(t)});if(u==="droplist"&&r)f.on("mouseenter",function(){n.selection.getRange()!=null&&(r.showTimeoutId=setTimeout(function(){r.show()},200))}).on("mouseleave",function(){r.hideTimeoutId=setTimeout(function(){r.hide()},0)});if(u==="panel"&&i.onClick)f.on("click",function(t){if(t.stopPropagation(),n.selection.getRange()!=null)i.onClick(t)})}})},changeActive:function(){var n=this.menus;f(n,function(n,t){t.tryChangeActive&&setTimeout(function(){t.tryChangeActive()},100)})}};yt.prototype={constructor:yt,init:function(){this._bindEvent()},clear:function(){this.html("<p><br><\/p>")},html:function(n){var t=this.editor,i=t.$textElem,r=void 0;if(n==null)return r=i.html(),r.replace(/\u200b/gm,"");i.html(n);t.initSelection()},getJSON:function(){var n=this.editor,t=n.$textElem;return ei(t)},text:function(n){var t=this.editor,i=t.$textElem,r=void 0;if(n==null)return r=i.text(),r.replace(/\u200b/gm,"");i.text("<p>"+n+"<\/p>");t.initSelection()},append:function(t){var i=this.editor,r=i.$textElem;r.append(n(t));i.initSelection()},_bindEvent:function(){this._saveRangeRealTime();this._enterKeyHandle();this._clearHandle();this._pasteHandle();this._tabHandle();this._imgHandle();this._dragHandle()},_saveRangeRealTime:function(){function t(){i.selection.saveRange();i.menus.changeActive()}var i=this.editor,n=i.$textElem;n.on("keyup",t);n.on("mousedown",function(){n.on("mouseleave",t)});n.on("mouseup",function(){t();n.off("mouseleave",t)})},_enterKeyHandle:function(){function r(i){var r=n("<p><br><\/p>");r.insertBefore(i);t.selection.createRangeByElem(r,!0);t.selection.restoreSelection();i.remove()}function u(){var n=t.selection.getSelectionContainerElem(),u=n.parent(),f;if(u.html()==="<code><br><\/code>"){r(n);return}u.equal(i)&&(f=n.getNodeName(),f!=="P")&&(n.text()||r(n))}function f(i){var r=t.selection.getSelectionContainerElem(),u,e,o;if(r){var f=r.parent(),s=r.getNodeName(),h=f.getNodeName();if(s==="CODE"&&h==="PRE"&&t.cmd.queryCommandSupported("insertHTML")){if(t._willBreakCode===!0){u=n("<p><br><\/p>");u.insertAfter(f);t.selection.createRangeByElem(u,!0);t.selection.restoreSelection();t._willBreakCode=!1;i.preventDefault();return}e=t.selection.getRange().startOffset;t.cmd.do("insertHTML","\n");t.selection.saveRange();t.selection.getRange().startOffset===e&&t.cmd.do("insertHTML","\n");o=r.html().length;t.selection.getRange().startOffset+1===o&&(t._willBreakCode=!0);i.preventDefault()}}}var t=this.editor,i=t.$textElem;i.on("keyup",function(n){n.keyCode===13&&u(n)});i.on("keydown",function(n){if(n.keyCode!==13){t._willBreakCode=!1;return}f(n)})},_clearHandle:function(){var i=this.editor,t=i.$textElem;t.on("keydown",function(n){if(n.keyCode===8){var i=t.html().toLowerCase().trim();if(i==="<p><br><\/p>"){n.preventDefault();return}}});t.on("keyup",function(r){if(r.keyCode===8){var u=void 0,f=t.html().toLowerCase().trim();f&&f!=="<br>"||(u=n("<p><br/><\/p>"),t.html(""),t.append(u),i.selection.createRangeByElem(u,!1,!0),i.selection.restoreSelection())}})},_pasteHandle:function(){function f(){var n=Date.now(),t=!1;return n-r>=100&&(t=!0),r=n,t}function h(){r=0}var t=this.editor,i=t.config,e=i.pasteFilterStyle,n=i.pasteTextHandle,s=i.pasteIgnoreImg,u=t.$textElem,r=0;u.on("paste",function(i){var u,r,c,l;if(!o.isIE()&&(i.preventDefault(),f())&&(u=ai(i,e,s),r=fi(i),r=r.replace(/\n/gm,"<br>"),c=t.selection.getSelectionContainerElem(),c)){if(l=c.getNodeName(),l==="CODE"||l==="PRE"){n&&v(n)&&(r=""+(n(r)||""));t.cmd.do("insertHTML","<p>"+r+"<\/p>");return}if(!u){h();return}try{n&&v(n)&&(u=""+(n(u)||""));t.cmd.do("insertHTML",u)}catch(a){n&&v(n)&&(r=""+(n(r)||""));t.cmd.do("insertHTML","<p>"+r+"<\/p>")}}});u.on("paste",function(n){var i,r,u,e;o.isIE()||(n.preventDefault(),f())&&(i=vi(n),i&&i.length)&&(r=t.selection.getSelectionContainerElem(),r)&&(u=r.getNodeName(),u!=="CODE"&&u!=="PRE")&&(e=t.uploadImg,e.uploadImg(i))})},_tabHandle:function(){var n=this.editor,t=n.$textElem;t.on("keydown",function(t){var i;if(t.keyCode===9&&n.cmd.queryCommandSupported("insertHTML")&&(i=n.selection.getSelectionContainerElem(),i)){var r=i.parent(),u=i.getNodeName(),f=r.getNodeName();u==="CODE"&&f==="PRE"?n.cmd.do("insertHTML","    "):n.cmd.do("insertHTML","&nbsp;&nbsp;&nbsp;&nbsp;");t.preventDefault()}})},_imgHandle:function(){var t=this.editor,i=t.$textElem;i.on("click","img",function(){var r=this,i=n(r);i.attr("data-w-e")!=="1"&&(t._selectedImg=i,t.selection.createRangeByElem(i),t.selection.restoreSelection())});i.on("click  keyup",function(n){n.target.matches("img")||(t._selectedImg=null)})},_dragHandle:function(){var t=this.editor,r=n(document),i;r.on("dragleave drop dragenter dragover",function(n){n.preventDefault()});i=t.$textElem;i.on("drop",function(n){var i,r;(n.preventDefault(),i=n.dataTransfer&&n.dataTransfer.files,i&&i.length)&&(r=t.uploadImg,r.uploadImg(i))})}};pt.prototype={constructor:pt,"do":function(n,t){var i=this.editor,r;(i._useStyleWithCSS||(document.execCommand("styleWithCSS",null,!0),i._useStyleWithCSS=!0),i.selection.getRange())&&(i.selection.restoreSelection(),r="_"+n,this[r]?this[r](t):this._execCommand(n,t),i.menus.changeActive(),i.selection.saveRange(),i.selection.restoreSelection(),i.change&&i.change())},_insertHTML:function(t){var r=this.editor,i=r.selection.getRange();this.queryCommandSupported("insertHTML")?this._execCommand("insertHTML",t):i.insertNode?(i.deleteContents(),i.insertNode(n(t)[0])):i.pasteHTML&&i.pasteHTML(t)},_insertElem:function(n){var i=this.editor,t=i.selection.getRange();t.insertNode&&(t.deleteContents(),t.insertNode(n[0]))},_execCommand:function(n,t){document.execCommand(n,!1,t)},queryCommandValue:function(n){return document.queryCommandValue(n)},queryCommandState:function(n){return document.queryCommandState(n)},queryCommandSupported:function(n){return document.queryCommandSupported(n)}};wt.prototype={constructor:wt,getRange:function(){return this._currentRange},saveRange:function(n){var i,r,t,u,f;if(n){this._currentRange=n;return}(i=window.getSelection(),i.rangeCount!==0)&&(r=i.getRangeAt(0),t=this.getSelectionContainerElem(r),t)&&(t.attr("contenteditable")==="false"||t.parentUntil("[contenteditable=false]")||(u=this.editor,f=u.$textElem,f.isContain(t)&&(this._currentRange=r)))},collapseRange:function(n){n==null&&(n=!1);var t=this._currentRange;t&&t.collapse(n)},getSelectionText:function(){var n=this._currentRange;return n?this._currentRange.toString():""},getSelectionContainerElem:function(t){t=t||this._currentRange;var i=void 0;if(t)return i=t.commonAncestorContainer,n(i.nodeType===1?i:i.parentNode)},getSelectionStartElem:function(t){t=t||this._currentRange;var i=void 0;if(t)return i=t.startContainer,n(i.nodeType===1?i:i.parentNode)},getSelectionEndElem:function(t){t=t||this._currentRange;var i=void 0;if(t)return i=t.endContainer,n(i.nodeType===1?i:i.parentNode)},isSelectionEmpty:function(){var n=this._currentRange;return n&&n.startContainer&&n.startContainer===n.endContainer&&n.startOffset===n.endOffset?!0:!1},restoreSelection:function(){var n=window.getSelection();n.removeAllRanges();n.addRange(this._currentRange)},createEmptyRange:function(){var r=this.editor,t=this.getRange(),i=void 0;if(t&&this.isSelectionEmpty())try{o.isWebkit()?(r.cmd.do("insertHTML","&#8203;"),t.setEnd(t.endContainer,t.endOffset+1),this.saveRange(t)):(i=n("<strong>&#8203;<\/strong>"),r.cmd.do("insertElem",i),this.createRangeByElem(i,!0))}catch(u){}},createRangeByElem:function(n,t,i){if(n.length){var u=n[0],r=document.createRange();i?r.selectNodeContents(u):r.selectNode(u);typeof t=="boolean"&&r.collapse(t);this.saveRange(r)}}};bt.prototype={constructor:bt,show:function(n){var u=this,i,r,t;this._isShow||(this._isShow=!0,i=this.$bar,this._isRender?this._isRender=!0:(r=this.$textContainer,r.append(i)),Date.now()-this._time>100&&n<=1&&(i.css("width",n*100+"%"),this._time=Date.now()),t=this._timeoutId,t&&clearTimeout(t),t=setTimeout(function(){u._hide()},500))},_hide:function(){var n=this.$bar;n.remove();this._time=0;this._isShow=!1;this._isRender=!1}};kt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n};dt.prototype={constructor:dt,_alert:function(n,t){var r=this.editor,u=r.config.debug,i=r.config.customAlert;if(u)throw new Error("wangEditor: "+(t||n));else i&&typeof i=="function"?i(n):alert(n)},insertLinkImg:function(n){var e=this,t;if(n){var u=this.editor,f=u.config,i=f.linkImgCheck,r=void 0;if(i&&typeof i=="function"&&(r=i(n),typeof r=="string")){alert(r);return}u.cmd.do("insertHTML",'<img src="'+n+'" style="max-width:100%;"/>');t=document.createElement("img");t.onload=function(){var i=f.linkImgCallback;i&&typeof i=="function"&&i(n);t=null};t.onerror=function(){t=null;e._alert("ÊèíÂÖ•ÂõæÁâáÈîôËØØ",'wangEditor: ÊèíÂÖ•ÂõæÁâáÂá∫ÈîôÔºåÂõæÁâáÈìæÊé•ÊòØ "'+n+'"Ôºå‰∏ãËΩΩËØ•ÈìæÊé•Â§±Ë¥•');return};t.onabort=function(){t=null};t.src=n}},uploadImg:function(n){var o=this,c,s,l,v,p,w,i,h;if(n&&n.length){var e=this.editor,r=e.config,u=r.uploadImgServer,b=r.uploadImgShowBase64,k=r.uploadImgMaxSize,g=k/1048576,d=r.uploadImgMaxLength||1e4,nt=r.uploadFileName||"",tt=r.uploadImgParams||{},it=r.uploadImgParamsWithUrl,rt=r.uploadImgHeaders||{},t=r.uploadImgHooks||{},ut=r.uploadImgTimeout||3e3,y=r.withCredentials;if(y==null&&(y=!1),c=r.customUploadImg,c||u||b){if(s=[],l=[],a(n,function(n){var t=n.name,i=n.size;if(t&&i){if(/\.(jpg|jpeg|png|bmp|gif|webp)$/i.test(t)===!1){l.push("„Äê"+t+"„Äë‰∏çÊòØÂõæÁâá");return}if(k<i){l.push("„Äê"+t+"„ÄëÂ§ß‰∫é "+g+"M");return}s.push(n)}}),l.length){this._alert("ÂõæÁâáÈ™åËØÅÊú™ÈÄöËøá: \n"+l.join("\n"));return}if(s.length>d){this._alert("‰∏ÄÊ¨°ÊúÄÂ§ö‰∏ä‰º†"+d+"Âº†ÂõæÁâá");return}if(c&&typeof c=="function"){c(s,this.insertLinkImg.bind(this));return}if(v=new FormData,a(s,function(n){var t=nt||n.name;v.append(t,n)}),u&&typeof u=="string"){if(p=u.split("#"),u=p[0],w=p[1]||"",f(tt,function(n,t){it&&(u+=u.indexOf("?")>0?"&":"?",u=u+n+"="+t);v.append(n,t)}),w&&(u+="#"+w),i=new XMLHttpRequest,i.open("POST",u),i.timeout=ut,i.ontimeout=function(){t.timeout&&typeof t.timeout=="function"&&t.timeout(i,e);o._alert("‰∏ä‰º†ÂõæÁâáË∂ÖÊó∂")},i.upload&&(i.upload.onprogress=function(n){var t=void 0,i=new bt(e);n.lengthComputable&&(t=n.loaded/n.total,i.show(t))}),i.onreadystatechange=function(){var n=void 0,r;if(i.readyState===4){if(i.status<200||i.status>=300){t.error&&typeof t.error=="function"&&t.error(i,e);o._alert("‰∏ä‰º†ÂõæÁâáÂèëÁîüÈîôËØØ","‰∏ä‰º†ÂõæÁâáÂèëÁîüÈîôËØØÔºåÊúçÂä°Âô®ËøîÂõûÁä∂ÊÄÅÊòØ "+i.status);return}if(n=i.responseText,(typeof n=="undefined"?"undefined":kt(n))!=="object")try{n=JSON.parse(n)}catch(u){t.fail&&typeof t.fail=="function"&&t.fail(i,e,n);o._alert("‰∏ä‰º†ÂõæÁâáÂ§±Ë¥•","‰∏ä‰º†ÂõæÁâáËøîÂõûÁªìÊûúÈîôËØØÔºåËøîÂõûÁªìÊûúÊòØ: "+n);return}t.customInsert||n.errno=="0"?(t.customInsert&&typeof t.customInsert=="function"?t.customInsert(o.insertLinkImg.bind(o),n,e):(r=n.data||[],r.forEach(function(n){o.insertLinkImg(n)})),t.success&&typeof t.success=="function"&&t.success(i,e,n)):(t.fail&&typeof t.fail=="function"&&t.fail(i,e,n),o._alert("‰∏ä‰º†ÂõæÁâáÂ§±Ë¥•","‰∏ä‰º†ÂõæÁâáËøîÂõûÁªìÊûúÈîôËØØÔºåËøîÂõûÁªìÊûú errno="+n.errno))}},t.before&&typeof t.before=="function"&&(h=t.before(i,e,s),h&&(typeof h=="undefined"?"undefined":kt(h))==="object"&&h.prevent)){this._alert(h.msg);return}f(rt,function(n,t){i.setRequestHeader(n,t)});i.withCredentials=y;i.send(v);return}b&&a(n,function(n){var i=o,t=new FileReader;t.readAsDataURL(n);t.onload=function(){i.insertLinkImg(this.result)}})}}}};oi=1;gt.prototype={constructor:gt,_initConfig:function(){var t,n;this.config=Object.assign({},ii,this.customConfig);t=this.config.lang||{};n=[];f(t,function(t,i){n.push({reg:new RegExp(t,"img"),val:i})});this.config.langArgs=n},_initDom:function(){var r=this,v=this.toolbarSelector,s=n(v),a=this.textSelector,h=this.config,y=h.zIndex,u=void 0,i=void 0,f=void 0,e=void 0,c,l,o;a==null?(u=n("<div><\/div>"),i=n("<div><\/div>"),e=s.children(),s.append(u).append(i),u.css("background-color","#f1f1f1").css("border","1px solid #ccc"),i.css("border","1px solid #ccc").css("border-top","none").css("height","300px")):(u=s,i=n(a),e=i.children());f=n("<div><\/div>");f.attr("contenteditable","true").css("width","100%").css("height","100%");e&&e.length?f.append(e):f.append(n("<p><br><\/p>"));i.append(f);u.addClass("w-e-toolbar");i.addClass("w-e-text-container");i.css("z-index",y);f.addClass("w-e-text");c=t("toolbar-elem");u.attr("id",c);l=t("text-elem");f.attr("id",l);this.$toolbarElem=u;this.$textContainerElem=i;this.$textElem=f;this.toolbarElemId=c;this.textElemId=l;o=!0;i.on("compositionstart",function(){o=!1});i.on("compositionend",function(){o=!0});i.on("click keyup",function(){o&&r.change&&r.change()});u.on("click",function(){this.change&&this.change()});if(h.onfocus||h.onblur){this.isFocus=!1;n(document).on("click",function(t){var i=f.isContain(n(t.target)),e=u.isContain(n(t.target)),o=u[0]==t.target?!0:!1;if(i)r.isFocus||r.onfocus&&r.onfocus(),r.isFocus=!0;else{if(e&&!o)return;r.isFocus&&r.onblur&&r.onblur();r.isFocus=!1}})}},_initCommand:function(){this.cmd=new pt(this)},_initSelectionAPI:function(){this.selection=new wt(this)},_initUploadImg:function(){this.uploadImg=new dt(this)},_initMenus:function(){this.menus=new vt(this);this.menus.init()},_initText:function(){this.txt=new yt(this);this.txt.init()},initSelection:function(t){var r=this.$textElem,f=r.children(),i,u,e;if(!f.length){r.append(n("<p><br><\/p>"));this.initSelection();return}if(i=f.last(),t&&(u=i.html().toLowerCase(),e=i.getNodeName(),u!=="<br>"&&u!=="<br/>"||e!=="P")){r.append(n("<p><br><\/p>"));this.initSelection();return}this.selection.createRangeByElem(i,!1,!0);this.selection.restoreSelection()},_bindEvent:function(){var f=0,e=this.txt.html(),t=this.config,n=t.onchangeTimeout,i,r,u;n=parseInt(n,10);(!n||n<=0)&&(n=200);i=t.onchange;i&&typeof i=="function"&&(this.change=function(){var t=this.txt.html();(t.length!==e.length||t!==e)&&(f&&clearTimeout(f),f=setTimeout(function(){i(t);e=t},n))});r=t.onblur;r&&typeof r=="function"&&(this.onblur=function(){var n=this.txt.html();r(n)});u=t.onfocus;u&&typeof u=="function"&&(this.onfocus=function(){u()})},create:function(){this._initConfig();this._initDom();this._initCommand();this._initSelectionAPI();this._initText();this._initMenus();this._initUploadImg();this.initSelection(!0);this._bindEvent()},_offAllEvent:function(){n.offAll()}};try{document}catch(yo){throw new Error("ËØ∑Âú®ÊµèËßàÂô®ÁéØÂ¢É‰∏ãËøêË°å");}return hi(),si='.w-e-toolbar,.w-e-text-container,.w-e-menu-panel {  padding: 0;  margin: 0;  box-sizing: border-box;}.w-e-toolbar *,.w-e-text-container *,.w-e-menu-panel * {  padding: 0;  margin: 0;  box-sizing: border-box;}.w-e-clear-fix:after {  content: "";  display: table;  clear: both;}.w-e-toolbar .w-e-droplist {  position: absolute;  left: 0;  top: 0;  background-color: #fff;  border: 1px solid #f1f1f1;  border-right-color: #ccc;  border-bottom-color: #ccc;}.w-e-toolbar .w-e-droplist .w-e-dp-title {  text-align: center;  color: #999;  line-height: 2;  border-bottom: 1px solid #f1f1f1;  font-size: 13px;}.w-e-toolbar .w-e-droplist ul.w-e-list {  list-style: none;  line-height: 1;}.w-e-toolbar .w-e-droplist ul.w-e-list li.w-e-item {  color: #333;  padding: 5px 0;}.w-e-toolbar .w-e-droplist ul.w-e-list li.w-e-item:hover {  background-color: #f1f1f1;}.w-e-toolbar .w-e-droplist ul.w-e-block {  list-style: none;  text-align: left;  padding: 5px;}.w-e-toolbar .w-e-droplist ul.w-e-block li.w-e-item {  display: inline-block;  *display: inline;  *zoom: 1;  padding: 3px 5px;}.w-e-toolbar .w-e-droplist ul.w-e-block li.w-e-item:hover {  background-color: #f1f1f1;}[class^="w-e-icon-"],[class*=" w-e-icon-"] {  /* use !important to prevent issues with browser extensions that change fonts */  font-family: \'w-e-icon\' !important;  speak: none;  font-style: normal;  font-weight: normal;  font-variant: normal;  text-transform: none;  line-height: 1;  /* Better Font Rendering =========== */  -webkit-font-smoothing: antialiased;  -moz-osx-font-smoothing: grayscale;}.w-e-icon-close:before {  content: "\\f00d";}.w-e-icon-upload2:before {  content: "\\e9c6";}.w-e-icon-trash-o:before {  content: "\\f014";}.w-e-icon-header:before {  content: "\\f1dc";}.w-e-icon-pencil2:before {  content: "\\e906";}.w-e-icon-paint-brush:before {  content: "\\f1fc";}.w-e-icon-image:before {  content: "\\e90d";}.w-e-icon-play:before {  content: "\\e912";}.w-e-icon-location:before {  content: "\\e947";}.w-e-icon-undo:before {  content: "\\e965";}.w-e-icon-redo:before {  content: "\\e966";}.w-e-icon-quotes-left:before {  content: "\\e977";}.w-e-icon-list-numbered:before {  content: "\\e9b9";}.w-e-icon-list2:before {  content: "\\e9bb";}.w-e-icon-link:before {  content: "\\e9cb";}.w-e-icon-happy:before {  content: "\\e9df";}.w-e-icon-bold:before {  content: "\\ea62";}.w-e-icon-underline:before {  content: "\\ea63";}.w-e-icon-italic:before {  content: "\\ea64";}.w-e-icon-strikethrough:before {  content: "\\ea65";}.w-e-icon-table2:before {  content: "\\ea71";}.w-e-icon-paragraph-left:before {  content: "\\ea77";}.w-e-icon-paragraph-center:before {  content: "\\ea78";}.w-e-icon-paragraph-right:before {  content: "\\ea79";}.w-e-icon-terminal:before {  content: "\\f120";}.w-e-icon-page-break:before {  content: "\\ea68";}.w-e-icon-cancel-circle:before {  content: "\\ea0d";}.w-e-icon-font:before {  content: "\\ea5c";}.w-e-icon-text-heigh:before {  content: "\\ea5f";}.w-e-toolbar {  display: -webkit-box;  display: -ms-flexbox;  display: flex;  padding: 0 5px;  /* flex-wrap: wrap; */  /* Âçï‰∏™ËèúÂçï */}.w-e-toolbar .w-e-menu {  position: relative;  text-align: center;  padding: 5px 10px;  cursor: pointer;}.w-e-toolbar .w-e-menu i {  color: #999;}.w-e-toolbar .w-e-menu:hover i {  color: #333;}.w-e-toolbar .w-e-active i {  color: #1e88e5;}.w-e-toolbar .w-e-active:hover i {  color: #1e88e5;}.w-e-text-container .w-e-panel-container {  position: absolute;  top: 0;  left: 50%;  border: 1px solid #ccc;  border-top: 0;  box-shadow: 1px 1px 2px #ccc;  color: #333;  background-color: #fff;  /* ‰∏∫ emotion panel ÂÆöÂà∂ÁöÑÊ†∑Âºè */  /* ‰∏ä‰º†ÂõæÁâáÁöÑ panel ÂÆöÂà∂Ê†∑Âºè */}.w-e-text-container .w-e-panel-container .w-e-panel-close {  position: absolute;  right: 0;  top: 0;  padding: 5px;  margin: 2px 5px 0 0;  cursor: pointer;  color: #999;}.w-e-text-container .w-e-panel-container .w-e-panel-close:hover {  color: #333;}.w-e-text-container .w-e-panel-container .w-e-panel-tab-title {  list-style: none;  display: -webkit-box;  display: -ms-flexbox;  display: flex;  font-size: 14px;  margin: 2px 10px 0 10px;  border-bottom: 1px solid #f1f1f1;}.w-e-text-container .w-e-panel-container .w-e-panel-tab-title .w-e-item {  padding: 3px 5px;  color: #999;  cursor: pointer;  margin: 0 3px;  position: relative;  top: 1px;}.w-e-text-container .w-e-panel-container .w-e-panel-tab-title .w-e-active {  color: #333;  border-bottom: 1px solid #333;  cursor: default;  font-weight: 700;}.w-e-text-container .w-e-panel-container .w-e-panel-tab-content {  padding: 10px 15px 10px 15px;  font-size: 16px;  /* ËæìÂÖ•Ê°ÜÁöÑÊ†∑Âºè */  /* ÊåâÈíÆÁöÑÊ†∑Âºè */}.w-e-text-container .w-e-panel-container .w-e-panel-tab-content input:focus,.w-e-text-container .w-e-panel-container .w-e-panel-tab-content textarea:focus,.w-e-text-container .w-e-panel-container .w-e-panel-tab-content button:focus {  outline: none;}.w-e-text-container .w-e-panel-container .w-e-panel-tab-content textarea {  width: 100%;  border: 1px solid #ccc;  padding: 5px;}.w-e-text-container .w-e-panel-container .w-e-panel-tab-content textarea:focus {  border-color: #1e88e5;}.w-e-text-container .w-e-panel-container .w-e-panel-tab-content input[type=text] {  border: none;  border-bottom: 1px solid #ccc;  font-size: 14px;  height: 20px;  color: #333;  text-align: left;}.w-e-text-container .w-e-panel-container .w-e-panel-tab-content input[type=text].small {  width: 30px;  text-align: center;}.w-e-text-container .w-e-panel-container .w-e-panel-tab-content input[type=text].block {  display: block;  width: 100%;  margin: 10px 0;}.w-e-text-container .w-e-panel-container .w-e-panel-tab-content input[type=text]:focus {  border-bottom: 2px solid #1e88e5;}.w-e-text-container .w-e-panel-container .w-e-panel-tab-content .w-e-button-container button {  font-size: 14px;  color: #1e88e5;  border: none;  padding: 5px 10px;  background-color: #fff;  cursor: pointer;  border-radius: 3px;}.w-e-text-container .w-e-panel-container .w-e-panel-tab-content .w-e-button-container button.left {  float: left;  margin-right: 10px;}.w-e-text-container .w-e-panel-container .w-e-panel-tab-content .w-e-button-container button.right {  float: right;  margin-left: 10px;}.w-e-text-container .w-e-panel-container .w-e-panel-tab-content .w-e-button-container button.gray {  color: #999;}.w-e-text-container .w-e-panel-container .w-e-panel-tab-content .w-e-button-container button.red {  color: #c24f4a;}.w-e-text-container .w-e-panel-container .w-e-panel-tab-content .w-e-button-container button:hover {  background-color: #f1f1f1;}.w-e-text-container .w-e-panel-container .w-e-panel-tab-content .w-e-button-container:after {  content: "";  display: table;  clear: both;}.w-e-text-container .w-e-panel-container .w-e-emoticon-container .w-e-item {  cursor: pointer;  font-size: 18px;  padding: 0 3px;  display: inline-block;  *display: inline;  *zoom: 1;}.w-e-text-container .w-e-panel-container .w-e-up-img-container {  text-align: center;}.w-e-text-container .w-e-panel-container .w-e-up-img-container .w-e-up-btn {  display: inline-block;  *display: inline;  *zoom: 1;  color: #999;  cursor: pointer;  font-size: 60px;  line-height: 1;}.w-e-text-container .w-e-panel-container .w-e-up-img-container .w-e-up-btn:hover {  color: #333;}.w-e-text-container {  position: relative;}.w-e-text-container .w-e-progress {  position: absolute;  background-color: #1e88e5;  bottom: 0;  left: 0;  height: 1px;}.w-e-text {  padding: 0 10px;  overflow-y: scroll;}.w-e-text p,.w-e-text h1,.w-e-text h2,.w-e-text h3,.w-e-text h4,.w-e-text h5,.w-e-text table,.w-e-text pre {  margin: 10px 0;  line-height: 1.5;}.w-e-text ul,.w-e-text ol {  margin: 10px 0 10px 20px;}.w-e-text blockquote {  display: block;  border-left: 8px solid #d0e5f2;  padding: 5px 10px;  margin: 10px 0;  line-height: 1.4;  font-size: 100%;  background-color: #f1f1f1;}.w-e-text code {  display: inline-block;  *display: inline;  *zoom: 1;  background-color: #f1f1f1;  border-radius: 3px;  padding: 3px 5px;  margin: 0 3px;}.w-e-text pre code {  display: block;}.w-e-text table {  border-top: 1px solid #ccc;  border-left: 1px solid #ccc;}.w-e-text table td,.w-e-text table th {  border-bottom: 1px solid #ccc;  border-right: 1px solid #ccc;  padding: 3px 5px;}.w-e-text table th {  border-bottom: 2px solid #ccc;  text-align: center;}.w-e-text:focus {  outline: none;}.w-e-text img {  cursor: pointer;}.w-e-text img:hover {  box-shadow: 0 0 5px #333;}',l=document.createElement("style"),l.type="text/css",l.innerHTML=si,document.getElementsByTagName("HEAD").item(0).appendChild(l),window.wangEditor||gt});